REM Create each table

CREATE TABLE bill_tos_ci
(
   bill_to_no   NUMBER(5)
      CONSTRAINT bill_bill_to_no_pk PRIMARY KEY,
   bill_to_first_name VARCHAR2(20)
      CONSTRAINT bill_bill_to_first_name_nn NOT NULL, 
   bill_to_last_name VARCHAR2(20)
      CONSTRAINT bill_bill_to_last_name_nn NOT NULL, 
   bill_to_street_1  VARCHAR2(30)
      CONSTRAINT bill_bill_to_street_1_nn NOT NULL,
   bill_to_street_2  VARCHAR2(15),
   bill_to_city   VARCHAR2(30)
      CONSTRAINT bill_bill_to_city_nn NOT NULL,
   bill_to_state CHAR(2)
      CONSTRAINT bill_bill_to_state_nn NOT NULL,
   bill_to_zip   CHAR(5)
      CONSTRAINT bill_bill_to_zip_nn NOT NULL
);

CREATE TABLE vehicles_ci
(
   vehicle_vin  VARCHAR2(17)  
      CONSTRAINT vcle_vehicle_vin_pk PRIMARY KEY,
   vehicle_make  VARCHAR2(20)
      CONSTRAINT vcle_vehicle_make_nn NOT NULL,
   vehicle_model VARCHAR2(20)
      CONSTRAINT vcle_vehicle_model_nn NOT NULL,
   vehicle_year  NUMBER(4)
      CONSTRAINT vcle_vehicle_year_nn NOT NULL,
   vehicle_color VARCHAR2(20)
      CONSTRAINT vcle_vehicle_color_nn NOT NULL,
   vehicle_dealer_no CHAR(5)
      CONSTRAINT vcle_vehicle_dealer_no_nn NOT NULL
);

CREATE TABLE items_ci
(
   item_no VARCHAR2(10)
      CONSTRAINT item_item_no_pk PRIMARY KEY,
   item_name VARCHAR2(20)
      CONSTRAINT item_item_name_nn NOT NULL,
   item_description VARCHAR2(30)
      CONSTRAINT item_item_description_nn NOT NULL,
   item_unit_price  NUMBER(6,2)
      CONSTRAINT item_item_unit_price_nn NOT NULL
);

CREATE TABLE owners_ci
(
   vehicle_vin  VARCHAR2(17),
   bill_to_no  NUMBER(5),
      CONSTRAINT owners_vcle_vin_bill_to_no_pk
         PRIMARY KEY (vehicle_vin,bill_to_no),
      CONSTRAINT owners_vehicle_vin_fk
         FOREIGN KEY (vehicle_vin)
         REFERENCES vehicles_ci(vehicle_vin),
      CONSTRAINT owners_bill_to_no_fk 
         FOREIGN KEY (bill_to_no)
         REFERENCES bill_tos_ci(bill_to_no)
);

CREATE TABLE invoices_ci
(
   invoice_no  NUMBER(5)
      CONSTRAINT invs_invoice_no_pk PRIMARY KEY,
   invoice_date DATE
      CONSTRAINT invs_inv_date_nn NOT NULL,  
   invoice_odometer  NUMBER(6,2)
      CONSTRAINT invs_inv_odometer_nn NOT NULL,
   invoice_tax  NUMBER(4,2)
      CONSTRAINT invs_inv_tax_nn NOT NULL,
   invoice_payment_cred  NUMBER(5,2)
      CONSTRAINT invs_inv_payment_nn NOT NULL,
   bill_to_no  NUMBER(5)
      CONSTRAINT invs_bill_to_no_nn NOT NULL,
   vehicle_vin  VARCHAR2(17)
      CONSTRAINT invs_vcle_vehicle_vin_nn NOT NULL,
      CONSTRAINT invs_bill_to_no_fk
         FOREIGN KEY (vehicle_vin,bill_to_no)
         REFERENCES owners_ci(vehicle_vin,bill_to_no)
);

CREATE TABLE items_sold_ci
(
   invoice_no  NUMBER(5),
   item_no  VARCHAR2(10),
   item_qty_sold  NUMBER(3)
      CONSTRAINT items_sold_item_qty_sold_nn  NOT NULL,
   item_unit_price NUMBER(5,2)
      CONSTRAINT items_sold_item_unit_price_nn
         NOT NULL,
   CONSTRAINT items_sold_inv_no_item_no_pk 
      PRIMARY KEY (invoice_no,item_no),
   CONSTRAINT items_sold_invoice_no_fk 
      FOREIGN KEY (invoice_no)
      REFERENCES invoices_ci(invoice_no),
   CONSTRAINT prods_item_no_fk
      FOREIGN KEY (item_no)
      REFERENCES items_ci(item_no)
);

REM To describe each table:
DESCRIBE bill_tos_ci
DESCRIBE vehicles_ci
DESCRIBE items_ci
DESCRIBE owners_ci
DESCRIBE invoices_ci
DESCRIBE items_sold_ci

REM To get information about constraints:
COLUMN constraint_name FORMAT A32;
COLUMN column_name FORMAT A20;
COLUMN table_name FORMAT A15;
SELECT constraint_name, column_name,table_name 
FROM user_cons_columns
WHERE constraint_name NOT LIKE 'BIN%' 
ORDER BY constraint_name;

REM Create sequences for each PK

CREATE SEQUENCE bill_tos_bill_to_no_seq
START WITH 1
INCREMENT BY 1
MAXVALUE 99999
NOCYCLE
NOCACHE;

CREATE SEQUENCE vehicle_vin_seq
START WITH 1
INCREMENT BY 1
MAXVALUE 99999
NOCYCLE
NOCACHE;

CREATE SEQUENCE items_item_no_seq 
START WITH 1 
INCREMENT BY 1 
MAXVALUE 99999 
NOCYCLE 
NOCACHE; 

CREATE SEQUENCE invoices_invoice_no_seq
START WITH 25333 
INCREMENT BY 1 
MAXVALUE 99999 
NOCYCLE
NOCACHE; 

REM To get information about sequences: 
SELECT sequence_name, increment_by 
FROM user_sequences;

DROPSS


DROP TABLE items_sold_ci;
DROP TABLE invoices_ci;
DROP TABLE owners_ci;
DROP TABLE items_ci;
DROP TABLE vehicles_ci;
DROP TABLE bill_tos_ci;





DROP SEQUENCE bill_tos_bill_to_no_seq;
DROP SEQUENCE vehicle_vin_seq;
DROP SEQUENCE items_item_no_seq; 
DROP SEQUENCE invoices_invoice_no_seq;

***********
REM inserts

INSERT INTO bill_to_ci,
(
bill_to_no,
bill_to_first_name,
bill_to_last_name,
bill_to_street_1,
bill_to_street_2,
bill_to_city,
bill_to_state,
bill_to_zip, 
)
VALUES
(
bill_to_ci_bill_to_no_seq.NEXTVAL,
'Yonnys',
'Mendez',
'4038 Park Ln',
'A',
'Palm Springs',
'FL',
'33406',
);

INSERT INTO invoices_ci,
(
invoice_no,
invoice_date,
invoice_odometer,
invoice_tax,
invoice_payment_cred,
invoice_bill_no,
vehicle_vin,
)
VALUES
(
invoices_ci_invoice_no_seq.NEXTVAL,
'25333',
'1/20/2015',
'88000.00',
'5.93',
'7.00',
'1',
'121V5G1H221457H47',
);

INSERT INTO vehicles_ci,
(
vehicle_vin,
vehicle_make,
vechicle_model,
vehicle_year,
vechile_color,
vehicle_dealer_no,
)
VALUES
(
vehicles_ci_vehicle_vin_seq.NEXTVAL,
'121V5G1H221457H47',
'Honda',
'Shadow1100',
'1985',
'BLACK',
'32582',
);

INSERT INTO itemss_ci,
(
item_no,
item_name,
item_description,
item_unit_price,
)
VALUES
(
itemss_ci_item_no_seq.NEXTVAL,
'1',
'Master',
'Master Cylinder Sight Glass',
'3.99',
);

INSERT INTO items_sold_ci,
(
invoice_no,
item_no,
item_qty_sold,
item_unit_price,
)
VALUES
(
items_sold_ci_invoice_no_seq.NEXTVAL,
'1',
'CARB KIT',
'2',
'39.88',
);

UPDATE bill_to_ci
SET customer_first_name = 'Jon'
WHERE bill_to_no = 1238;
